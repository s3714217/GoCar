<!DOCTYPE html>
<html lang = "en">
<head>
	<meta charset = "UTF-8"/>
	<title>Login.html</title>
	
	<script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-firestore.js"></script>
	<script src="../js/config.js"></script>
	<script src="../js/global.js"></script>
	
	<script>
		function signIn(){
			var txtUsername = document.getElementById("username").value;
			var txtPassword = document.getElementById("password").value;
			
			if (txtUsername === "" || txtPassword === ""){
				alert("Please enter a username and password");
				return
			}
			
			username = txtUsername;
			localStorage.setItem("storageName", username);
			var password = txtPassword;
			
			db.collection("admins").doc(username).get()
				.then(function(doc){
					if (doc.exists){
						var getPassword = doc.data().password;
						if (password == getPassword){
							window.location.replace("dashboardTest.html");
						} else {
							alert("Please enter a valid password");
						}
					} else {
						alert("Please enter a valid username");
					}
				})
				.catch(function(error){
					console.log("error", error);
				});
		}	
		
	</script>
</head>

<body>
	<h1>Login</h1>
	
	<form action = "">
		<label>Username</label>
		<input type = "text" id = "username"/>
		<br/>
		<br/>
		<label>Password</label>
		<input type = "password" id = "password"/>
		<br/>
		<br/>
		<button type = "button" id = "login" onclick = "signIn()">
			Login
		</button>
	</form>
</body>
</html>